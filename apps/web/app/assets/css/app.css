@import "tailwindcss";

/*
 * ═══════════════════════════════════════════════════════════════
 * OKLCH Seed-Based Color System
 *
 * Two axes:
 *   base-*    = spatial layers (fixed direction, always darker = further back)
 *   surface-* = interactive shifts (relative to inherited --base, uses --dir)
 *
 * --seed is the raw OKLCH root color.
 * --base is the inherited context variable — set by .base-* classes,
 * and all derived tokens (surfaces, text, edges) adapt automatically.
 * ═══════════════════════════════════════════════════════════════
 */

:root {
  /* ── Seed coordinates ── */
  --seed-h: 55;
  --seed-c: 0.002;
  --accent-h: 250;
  --accent-c: 0.18;

  /* ── Control ── */
  --dir: -1; /* light mode: surfaces darken to elevate */
  --contrast: 1;

  /* ── Edge alpha (per-scheme) ── */
  --edge-alpha: 0.12;
  --edge-alpha-subtle: 0.06;
  --edge-alpha-strong: 0.2;

  /* ── Base level offsets from seed (subtracted from seed lightness, negative = lighter) ── */
  --base-0-offset: 0.08;
  --base-1-offset: 0.03;
  --base-3-offset: -0.015;

  /* ── Surface steps per base (1x, 2x, 3x multipliers in @utility base-*) ── */
  --surface-step-on-0: 0.035;
  --surface-step-on-1: 0.035;
  --surface-step-on-2: 0.035;
  --surface-step-on-3: 0.035;

  /* ── Fallback for elements not inside a base-* class ── */
  --surface-1: var(--surface-step-on-2);
  --surface-2: calc(var(--surface-step-on-2) * 2);
  --surface-3: calc(var(--surface-step-on-2) * 3);

  /* ── Composed seed colors ── */
  --seed: oklch(0.985 var(--seed-c) var(--seed-h));
  --accent: oklch(0.55 var(--accent-c) var(--accent-h));

  /* ── Inherited context (defaults to seed, overridden by .base-* classes) ── */
  --base: var(--seed);

  /* ── Intent seeds ── */
  --danger: oklch(0.55 0.2 25);
  --warn: oklch(0.75 0.15 85);
  --success: oklch(0.55 0.17 155);
}

@media (prefers-color-scheme: dark) {
  :root {
    color-scheme: dark;
    --dir: 1;
    --edge-alpha: 0.08;
    --edge-alpha-subtle: 0.04;
    --edge-alpha-strong: 0.14;
    --base-0-offset: 0.12;
    --base-1-offset: 0.02;
    --base-3-offset: -0.03;
    --surface-step-on-0: 0.14;
    --surface-step-on-1: 0.065;
    --surface-step-on-2: 0.05;
    --surface-step-on-3: 0.04;
    --seed: oklch(0.15 var(--seed-c) var(--seed-h));
    --accent: oklch(0.7 var(--accent-c) var(--accent-h));
    --danger: oklch(0.7 0.18 25);
    --warn: oklch(0.8 0.14 85);
    --success: oklch(0.7 0.15 155);
  }
}

@theme {
  /* ── Fonts ── */
  --font-sans: "Inter Variable", sans-serif;
  --font-mono: "JetBrains Mono", monospace;
  --font-display: "Inter", sans-serif;

  /*
   * ═══════════════════════════════════════
   * BASE — Spatial layers (fixed direction)
   * Always darker-to-lighter regardless of color scheme.
   * Derived from --seed (not --base), so they're global.
   * .base-* classes override --base for children.
   * ═══════════════════════════════════════
   */
  --color-base-0: oklch(from var(--seed) calc(l - var(--base-0-offset) * var(--contrast)) c h);
  --color-base-1: oklch(from var(--seed) calc(l - var(--base-1-offset) * var(--contrast)) c h);
  --color-base-2: var(--seed);
  --color-base-3: oklch(from var(--seed) calc(l - var(--base-3-offset) * var(--contrast)) c h);

  /* Surfaces moved to @utility (context-relative, see below) */

  /*
   * ═══════════════════════════════════════
   * TEXT — Hierarchy via lightness
   * Shares base hue+chroma for "same material" feel
   * ═══════════════════════════════════════
   */
  --text-color-primary: oklch(
    from var(--base) calc(l + 0.75 * var(--dir) * var(--contrast)) c h
  );
  --text-color-secondary: oklch(
    from var(--base) calc(l + 0.55 * var(--dir) * var(--contrast)) c h
  );
  --text-color-tertiary: oklch(
    from var(--base) calc(l + 0.4 * var(--dir) * var(--contrast)) c h
  );
  --text-color-inverse: var(--base);

  /*
   * ═══════════════════════════════════════
   * EDGES — Semi-transparent 
   * Adapts to any background they sit on
   * ═══════════════════════════════════════
   */
  --border-color-edge: oklch(
    from var(--base) calc(l + 0.75 * var(--dir)) c h / var(--edge-alpha)
  );
  --border-color-edge-subtle: oklch(
    from var(--base) calc(l + 0.75 * var(--dir)) c h / var(--edge-alpha-subtle)
  );
  --border-color-edge-strong: oklch(
    from var(--base) calc(l + 0.75 * var(--dir)) c h / var(--edge-alpha-strong)
  );

  /*
   * ═══════════════════════════════════════
   * RING — Same as edge, no layout impact
   * ═══════════════════════════════════════
   */
  --ring-color-edge: oklch(
    from var(--base) calc(l + 0.75 * var(--dir)) c h / var(--edge-alpha)
  );

  /*
   * ═══════════════════════════════════════
   * OUTLINE — Mirrors edge for consistency
   * ═══════════════════════════════════════
   */
  --outline-color-edge: oklch(
    from var(--base) calc(l + 0.75 * var(--dir)) c h / var(--edge-alpha)
  );

  /*
   * ═══════════════════════════════════════
   * FOCUS RING — Based on accent
   * ═══════════════════════════════════════
   */
  --ring-color-focus: var(--accent);
  --ring-color-focus-subtle: oklch(from var(--accent) l c h / 0.35);

  /*
   * ═══════════════════════════════════════
   * ACCENT — Brand/interactive color
   * ═══════════════════════════════════════
   */
  --color-accent: var(--accent);
  --color-accent-subtle: oklch(from var(--accent) l c h / 0.12);
  --color-accent-strong: oklch(
    from var(--accent) calc(l + 0.08 * var(--dir)) c h
  );
  --color-accent-on: oklch(0.99 0 0);

  /*
   * ═══════════════════════════════════════
   * DANGER
   * ═══════════════════════════════════════
   */
  --color-danger: var(--danger);
  --color-danger-subtle: oklch(from var(--danger) l c h / 0.12);
  --color-danger-strong: oklch(
    from var(--danger) calc(l + 0.08 * var(--dir)) c h
  );
  --color-danger-on: oklch(0.99 0 0);

  /*
   * ═══════════════════════════════════════
   * WARN
   * ═══════════════════════════════════════
   */
  --color-warn: var(--warn);
  --color-warn-subtle: oklch(from var(--warn) l c h / 0.12);
  --color-warn-strong: oklch(from var(--warn) calc(l + 0.08 * var(--dir)) c h);
  --color-warn-on: oklch(0.15 0 0);

  /*
   * ═══════════════════════════════════════
   * SUCCESS (actual green — not blue)
   * ═══════════════════════════════════════
   */
  --color-success: var(--success);
  --color-success-subtle: oklch(from var(--success) l c h / 0.12);
  --color-success-strong: oklch(
    from var(--success) calc(l + 0.08 * var(--dir)) c h
  );
  --color-success-on: oklch(0.99 0 0);

  /*
   * ═══════════════════════════════════════
   * SPECIAL PURPOSE
   * ═══════════════════════════════════════
   */
  --color-overlay: oklch(0 0 0 / 0.4);
  --color-inverse: oklch(
    from var(--base) calc(l + 0.8 * var(--dir) * var(--contrast)) c h
  );

  /* Terminal (forced dark regardless of mode) */
  --color-terminal: oklch(0.1 var(--seed-c) var(--seed-h));
  --color-terminal-text: oklch(0.65 var(--seed-c) var(--seed-h));
  --color-terminal-dim: oklch(0.45 var(--seed-c) var(--seed-h));

  /*
   * ═══════════════════════════════════════
   * TYPOGRAPHY
   * ═══════════════════════════════════════
   */
  --text-title-lg: var(--text-5xl);
  --text-title-lg--font-weight: 400;

  --text-title: var(--text-4xl);
  --text-title--font-weight: 400;

  --text-title-md: var(--text-2xl);
  --text-title-md--font-weight: 400;

  --text-title-sm: var(--text-xl);
  --text-title-sm--font-weight: 400;

  --text-copy-xl: var(--text-lg);
  --text-copy-xl--font-weight: 400;

  --text-copy-lg: var(--text-base);
  --text-copy-lg--font-weight: 400;

  --text-copy: var(--text-sm);
  --text-copy--font-weight: 400;

  --text-copy-sm: var(--text-xs);
  --text-copy-sm--font-weight: 400;
  --text-copy-sm--line-height: 1.1rem;

  --text-copy-xs: 0.625rem;
  --text-copy-xs--font-weight: 400;

  --text-label: var(--text-sm);
  --text-label--font-weight: 500;

  /*
   * ═══════════════════════════════════════
   * SHADOWS
   * ═══════════════════════════════════════
   */
  --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.04);
  --shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.04), 0 8px 8px -8px rgba(0, 0, 0, 0.04);
  --shadow-md:
    0 2px 2px 0 rgba(0, 0, 0, 0.04), 0 8px 16px -4px rgba(0, 0, 0, 0.04);
  --shadow-lg: 0 1px 1px 0 rgba(0, 0, 0, 0.02), 0 4px 8px 0 rgba(0, 0, 0, 0.04);
  --shadow-xl:
    0 1px 1px 0 rgba(0, 0, 0, 0.02), 0 4px 8px -4px rgba(0, 0, 0, 0.04),
    0 16px 24px -8px rgba(0, 0, 0, 0.06);
  --shadow-2xl:
    0 1px 1px 0 rgba(0, 0, 0, 0.02), 0 8px 16px -4px rgba(0, 0, 0, 0.04),
    0 24px 32px -8px rgba(0, 0, 0, 0.06);

  /*
   * ═══════════════════════════════════════
   * ANIMATIONS
   * ═══════════════════════════════════════
   */
  --animate-overlayShow: overlayShow 150ms cubic-bezier(0.16, 1, 0.3, 1);
  --animate-contentShow: contentShow 150ms cubic-bezier(0.16, 1, 0.3, 1);
  --animate-fade-in-from-top: fade-in-from-top 150ms
    cubic-bezier(0.16, 1, 0.3, 1);
  --animate-fade-out: fade-out 250ms cubic-bezier(0.16, 1, 0.3, 1);

  @keyframes overlayShow {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  @keyframes contentShow {
    from {
      opacity: 0;
      scale: 0.96;
    }
    to {
      opacity: 1;
      scale: 1;
    }
  }

  @keyframes fade-in-from-top {
    from {
      opacity: 0;
      transform: scale(0.96) translateY(-10px);
    }
    to {
      opacity: 1;
      transform: scale(1) translateY(0);
    }
  }

  @keyframes fade-out {
    from {
      opacity: 1;
      scale: 1;
    }
    to {
      opacity: 0;
      scale: 0.98;
    }
  }
}

/*
 * ═══════════════════════════════════════════════════════════════
 * BASE UTILITIES
 *
 * Each base-* sets --base on its element, which propagates
 * to all children via CSS cascade. Surface, text, and edge tokens
 * derive from --base, so they adapt automatically.
 *
 * Defined as @utility so Tailwind variants work (hover:base-1, etc.)
 * ═══════════════════════════════════════════════════════════════
 */
@utility base-0 {
  --base: var(--color-base-0);
  --surface-1: var(--surface-step-on-0);
  --surface-2: calc(var(--surface-step-on-0) * 2);
  --surface-3: calc(var(--surface-step-on-0) * 3);
  background-color: var(--base);
}
@utility base-1 {
  --base: var(--color-base-1);
  --surface-1: var(--surface-step-on-1);
  --surface-2: calc(var(--surface-step-on-1) * 2);
  --surface-3: calc(var(--surface-step-on-1) * 3);
  background-color: var(--base);
}
@utility base-2 {
  --base: var(--color-base-2);
  --surface-1: var(--surface-step-on-2);
  --surface-2: calc(var(--surface-step-on-2) * 2);
  --surface-3: calc(var(--surface-step-on-2) * 3);
  background-color: var(--base);
}
@utility base-3 {
  --base: var(--color-base-3);
  --surface-1: var(--surface-step-on-3);
  --surface-2: calc(var(--surface-step-on-3) * 2);
  --surface-3: calc(var(--surface-step-on-3) * 3);
  background-color: var(--base);
}

/*
 * ═══════════════════════════════════════════════════════════════
 * BG-BASE — Matches the current inherited base level
 * Use where you want an element to "blend into" its base context.
 * ═══════════════════════════════════════════════════════════════
 */
@utility bg-base {
  background-color: var(--base);
}

/*
 * ═══════════════════════════════════════════════════════════════
 * SURFACE UTILITIES — Context-relative (derive from inherited --base)
 *
 * Defined as @utility so the oklch() expression is inlined on each
 * element, allowing var(--base) to resolve from the element's own
 * inherited scope rather than :root.
 * ═══════════════════════════════════════════════════════════════
 */
@utility bg-surface-1 {
  background-color: oklch(
    from var(--base) calc(l + var(--surface-1) * var(--dir)) c h
  );
}
@utility bg-surface-2 {
  background-color: oklch(
    from var(--base) calc(l + var(--surface-2) * var(--dir)) c h
  );
}
@utility bg-surface-3 {
  background-color: oklch(
    from var(--base) calc(l + var(--surface-3) * var(--dir)) c h
  );
}

/* base */

html,
body,
#__nuxt {
  min-height: 100%;
}
