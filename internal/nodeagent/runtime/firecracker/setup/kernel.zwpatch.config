#
# Zeitwork-specific kernel configuration patch
# This file should be appended to kernel.default.config
# Only contains configs that differ from the default Firecracker config
#

# Zeitwork branding
CONFIG_LOCALVERSION="-zeitwork"

# Network diagnostics (disabled in default, but useful for Zeitwork)
CONFIG_NETLINK_DIAG=y
CONFIG_UNIX_DIAG=y
CONFIG_INET_UDP_DIAG=y

# IPv6 security and tunneling (disabled in default, but needed for Zeitwork)
CONFIG_INET6_AH=y
CONFIG_INET6_ESP=y
CONFIG_IPV6_MIP6=y
CONFIG_IPV6_SIT=y
CONFIG_IPV6_TUNNEL=y

# VirtIO support (essential for Firecracker VMs)
# Core VirtIO drivers - these are already enabled in default config but we document them here
# CONFIG_VIRTIO=y                    # Core VirtIO support (already in default)
# CONFIG_VIRTIO_BLK=y                # VirtIO block device (already in default)
# CONFIG_VIRTIO_NET=y                # VirtIO network device (already in default)
# CONFIG_VIRTIO_MMIO=y               # Memory-mapped VirtIO (already in default)

# Additional VirtIO enhancements for Zeitwork
CONFIG_VIRTIO_MMIO_CMDLINE_DEVICES=y  # Allow specifying MMIO devices via kernel cmdline
CONFIG_VIRTIO_MEM=y                   # VirtIO memory device support
CONFIG_VIRTIO_INPUT=y                 # VirtIO input device support
CONFIG_SCSI_VIRTIO=y                  # VirtIO SCSI support (for advanced storage scenarios)

# VirtIO performance optimizations
CONFIG_VIRTIO_BLK_SCSI=y              # Enable SCSI passthrough for VirtIO block devices
CONFIG_BLK_MQ_VIRTIO=y                # Multi-queue support for VirtIO block (already in default)
